POSTMAN: http://localhost:8080/api/usuarios/

create database Agro_Sync;
use Agro_Sync;

-- Tablas
CREATE TABLE Usuario (
    id INT AUTO_INCREMENT PRIMARY KEY,
    nombre VARCHAR(255) NOT NULL,
    contrasena VARCHAR(255) NOT NULL,
    permisos VARCHAR(255) NOT NULL
);
CREATE TABLE Piensos (
    id INT PRIMARY KEY auto_increment,
    Nombre VARCHAR(255) NOT NULL,
    CantidadInventario INT
);

CREATE TABLE Ingredientes (
    id INT PRIMARY KEY auto_increment,
    Nombre VARCHAR(255) NOT NULL,
	CantidadInventario INT
);

CREATE TABLE ComposicionPiensos (
    PiensosID INT,
    IngredienteID INT,
    PRIMARY KEY (PiensosID, IngredienteID),
    FOREIGN KEY (PiensosID) REFERENCES Piensos(id),
    FOREIGN KEY (IngredienteID) REFERENCES Ingredientes(id)
);

- Inserts
-- Insertar usuario con permisos "admin"
INSERT INTO Usuario (nombre, contrasena, permisos) VALUES ('admin_user', '123', 'admin');

-- Insertar usuario con permisos "prueba"
INSERT INTO Usuario (nombre, contrasena, permisos) VALUES ('test_user', '123', 'prueba');
select * from Usuario;
-- Inserts en la tabla Piensos
INSERT INTO Piensos (Nombre, CantidadInventario) VALUES
    ('Pienso1', 100),
    ('Pienso2', 150),
    ('Pienso3', 120),
    ('Pienso4', 200),
    ('Pienso5', 180),
    ('Pienso6', 90),
    ('Pienso7', 130),
    ('Pienso8', 170),
    ('Pienso9', 110),
    ('Pienso10', 160);

-- Inserts en la tabla Ingredientes
INSERT INTO Ingredientes (Nombre, CantidadInventario) VALUES
    ('Ingrediente1', 500),
    ('Ingrediente2', 700),
    ('Ingrediente3', 300),
    ('Ingrediente4', 450),
    ('Ingrediente5', 600);

-- Inserts en la tabla ComposicionPiensos
INSERT INTO ComposicionPiensos (PiensosID, IngredienteID) VALUES
    (1, 1),
    (1, 2),
    (2, 2),
    (2, 3),
    (3, 4),
    (3, 1),
    (4, 5),
    (4, 2),
    (5, 3),
    (5, 4);


- Procedimientos
DELIMITER //

CREATE PROCEDURE obtener_usuarios()
BEGIN
    SELECT id, nombre, contrasena, permisos FROM Usuario;
END //

DELIMITER ;
DELIMITER //

CREATE PROCEDURE obtener_piensos()
BEGIN
    SELECT * FROM Pienso;
END //

DELIMITER ;
DELIMITER //

CREATE PROCEDURE obtener_composiciones()
BEGIN
    SELECT * FROM ComposicionPiensos;
END //

DELIMITER ;